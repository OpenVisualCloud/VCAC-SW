From 99a60fc8cf8fce5f89e8f50ec662ea0b62b2ee5c Mon Sep 17 00:00:00 2001
From: Artur Opalinski <ArturX.Opalinski@intel.com>
Date: Wed, 10 Jun 2020 10:08:39 +0000
Subject: [PATCH 6/7] Build VIRTIO_NET and VIRTIO_CONSOLE as modules

Current methd of building&booting images requires this
---
 .config | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/.config b/.config
index 97543d5f635e..7a731d985816 100644
--- a/.config
+++ b/.config
@@ -1202,7 +1202,7 @@ CONFIG_RFKILL_INPUT=y
 # CONFIG_LWTUNNEL is not set
 CONFIG_DST_CACHE=y
 CONFIG_GRO_CELLS=y
-# CONFIG_FAILOVER is not set
+CONFIG_FAILOVER=m
 CONFIG_HAVE_EBPF_JIT=y
 
 #
@@ -1673,7 +1673,7 @@ CONFIG_NET_POLL_CONTROLLER=y
 # CONFIG_TUN is not set
 # CONFIG_TUN_VNET_CROSS_LE is not set
 # CONFIG_VETH is not set
-# CONFIG_VIRTIO_NET is not set
+CONFIG_VIRTIO_NET=m
 # CONFIG_NLMON is not set
 # CONFIG_ARCNET is not set
 
@@ -2054,7 +2054,7 @@ CONFIG_WLAN_VENDOR_QUANTENNA=y
 # CONFIG_VMXNET3 is not set
 # CONFIG_FUJITSU_ES is not set
 # CONFIG_NETDEVSIM is not set
-# CONFIG_NET_FAILOVER is not set
+CONFIG_NET_FAILOVER=m
 # CONFIG_ISDN is not set
 # CONFIG_NVM is not set
 
@@ -2324,7 +2324,8 @@ CONFIG_SERIAL_CORE_CONSOLE=y
 # end of Serial drivers
 
 # CONFIG_SERIAL_DEV_BUS is not set
-# CONFIG_VIRTIO_CONSOLE is not set
+CONFIG_HVC_DRIVER=y
+CONFIG_VIRTIO_CONSOLE=m
 # CONFIG_IPMI_HANDLER is not set
 CONFIG_HW_RANDOM=y
 # CONFIG_HW_RANDOM_TIMERIOMEM is not set
-- 
2.17.1

